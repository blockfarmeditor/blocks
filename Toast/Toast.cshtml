@model BlockFarmEditor.Components.Blocks.Toast.ToastProperties
@{
    var toastId = !string.IsNullOrWhiteSpace(Model.ToastId) ? Model.ToastId : Guid.NewGuid().ToString("N")[..8];
    var toastClass = "toast";
    if (!string.IsNullOrWhiteSpace(Model.ToastColor))
    {
        toastClass += $" {Model.ToastColor}";
    }
}

<!-- Button trigger toast -->
<button type="button" class="btn btn-primary" id="liveToastBtn@(toastId)">
    @Model.TriggerButtonText
</button>

<!-- Toast container -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="@toastId" class="@toastClass" role="alert" aria-live="assertive" aria-atomic="true"
         @if (Model.AutoHide) { 
             <text>data-bs-autohide="true" data-bs-delay="@Model.Delay"</text>
         } else { 
             <text>data-bs-autohide="false"</text>
         }>
        @if (!string.IsNullOrWhiteSpace(Model.HeaderTitle) || !string.IsNullOrWhiteSpace(Model.HeaderSubtitle))
        {
            <div class="toast-header">
                <strong class="me-auto">@Model.HeaderTitle</strong>
                @if (!string.IsNullOrWhiteSpace(Model.HeaderSubtitle))
                {
                    <small>@Model.HeaderSubtitle</small>
                }
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        }
        <div class="toast-body">
            @Html.Raw(Model.ToastContent)
            @if (string.IsNullOrWhiteSpace(Model.HeaderTitle) && string.IsNullOrWhiteSpace(Model.HeaderSubtitle))
            {
                <div class="mt-2 pt-2 border-top">
                    <button type="button" class="btn-close float-end" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            }
        </div>
    </div>
</div>

<script>
    document.getElementById('liveToastBtn@(toastId)').addEventListener('click', function() {
        const toastElement = document.getElementById('@toastId');
        const toast = new bootstrap.Toast(toastElement);
        toast.show();
    });
</script>
