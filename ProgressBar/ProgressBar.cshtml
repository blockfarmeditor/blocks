@model BlockFarmEditor.Components.Blocks.ProgressBar.ProgressBarProperties
@{
    var percentage = Model.MaxValue > Model.MinValue ? 
        (double)((Model.ProgressValue - Model.MinValue) / (Model.MaxValue - Model.MinValue) * 100) : 0;
    percentage = Math.Max(0, Math.Min(100, percentage));
    
    var progressBarClass = "progress-bar";
    if (!string.IsNullOrWhiteSpace(Model.ProgressColor))
    {
        progressBarClass += $" {Model.ProgressColor}";
    }
    if (Model.Striped)
    {
        progressBarClass += " progress-bar-striped";
    }
    if (Model.Animated)
    {
        progressBarClass += " progress-bar-animated";
    }
    
    var progressStyle = !string.IsNullOrWhiteSpace(Model.Height) ? $"height: {Model.Height};" : "";
}

<div class="progress" @if (!string.IsNullOrWhiteSpace(progressStyle)) { <text>style="@progressStyle"</text> } role="progressbar" aria-label="@Model.Label" aria-valuenow="@Model.ProgressValue" aria-valuemin="@Model.MinValue" aria-valuemax="@Model.MaxValue">
    <div class="@progressBarClass" style="width: @(percentage)%">
        @if (!string.IsNullOrWhiteSpace(Model.Label))
        {
            @Model.Label
        }
        else
        {
            @($"{percentage:F0}%")
        }
    </div>
</div>
